<!DOCTYPE html>
<html>
<head>
	<style type="text/css">
	body {
		height: 100vh;
		width: 100vw;
		margin:0;
		background-color: hsl(220,50%,70%);

	}
	#time{
		position: fixed;
		left:50%;
		transition: 2s;
	}
	.start{
		position: fixed;
		top: 18.2%;
		left: 3.5%;
		height: 60vh;
		width: 90%;
		display: block;
		background-color: purple;
		z-index: 1000;
	}
	.close{
		position: fixed;
		top: -20%;
		z-index: 0;		
	}
	.floor{
		position: absolute;
		top: 80%;
		left: 0%;
		display: block;
		height: 20vh;
		width: 200%;
		background-color: #5E2c04;
		opacity: 1;
		z-index: 999;
	}
	#charac{
		position: absolute;
		top: 60%;
		left: 10%;
		display: block;
		height: 20vh;
		width: 7%;
		background-image: url("walk-R.tif");
		background-size: contain;
		background-repeat: no-repeat;
		background-position: center;
		transition: top .1s;
	}
	#charac[class = 'right']{animation: right 0.4s infinite alternate;}
	@keyframes right {
		50% {background-color: red;}
		100% {background-color: blue;}
	}
	#a{
		position: absolute;
		top: 90%;
		left: 30%;
		display: block;
		height: 100vh;
		width: 10%;
		background-color: green;
		transition: 0s;
	}
	#b{
		position: absolute;
		top: -40%;
		left: 10%;
		display: block;
		height: 80vh;
		width: 10%;
		background-color: green;
	}
	#c{
		position: absolute;
		top: 60%;
		left: 50%;
		display: block;
		height: 5vh;
		width: 40%;
		background-color: green;
	}
	#d{
		position: absolute;
		top: 60%;
		left: 150%;
		display: block;
		height: 5vh;
		width: 40%;
		background-color: green;
	}
	#e{
		position: absolute;
		top: 60%;
		left: 160%;
		display: block;
		height: 60vh;
		width: 10%;
		background-color: green;

	}


	</style>
	<title></title>
</head>
<body>

	<div id="time">0</div>
	<dir id="start" class="start"><center>please enter up button</center></dir>
	<div class="floor"></div>
	<div id="charac" class='stand'></div>
	<div id="a">1</div>
	<div id="b">2</div>
	<div id="c">3</div>
	<div id="d">4</div>
	<div id="e">5</div>

<script type="text/javascript">
		if(true){var mavo = setTimeout(function(){window.scrollTo(0,0);},1);}
		var up = false;
		var down = false;
		var left = false;
		var right = false;
		var start = false;
		grow = 60;
		x = 0;
		y = 60;
		stax = 0;
		h = 20;
		w = 7;
		move = 3;
		t = 0;
		i = 1;
		gavity();
		
		var tbs = [90,-40,60,60];
		var hbs = [tbs[0]-h,tbs[1]-h,tbs[2]-h,tbs[3]-h,tbs[3]-(h-1),61,60];
		var lbs = [30,10,50,150];
		boxa =false;
		boxb = false;
		id2 = "#b";
		
		document.addEventListener('keydown',press)
		function press(e){
			if (e.keyCode === 38)
			{
				document.getElementById("start").setAttribute("class", "close");
				start =true;
			}
			if (e.keyCode === 87||e.keyCode === 32){
				if (y>=grow) {stax=1;}
				if (stax===2) {stax+=1;}
				up = true;
			}
			if (e.keyCode === 40||e.keyCode === 83){
				down = true;
			}
			if (e.keyCode === 39||e.keyCode===68){
				right = true;

			}
			if (e.keyCode === 37||e.keyCode === 65){
				left = true;
			}
		}
		document.addEventListener('keyup',release)  /*32 = spacebar*/
		function release(e){
  			if (e.keyCode === 32 /* up */ || e.keyCode === 87 /* w */ || e.keyCode === 90 /* z */){
    			up = false;
  			}
  			if (e.keyCode === 39 /* right */ || e.keyCode === 68 /* d */){
    			right = false;
    			var mr = document.querySelector("#charac").setAttribute("class", "stand");
  			}
  			if (e.keyCode === 40 /* down */ || e.keyCode === 83 /* s */){
   				down = false;
  			}
  			if (e.keyCode === 37 /* left */ || e.keyCode === 65 /* a */ || e.keyCode === 81 /* q */){
    			left = false;
  			}

		}
		function gameLoop(){
  			var div = document.querySelector('#charac')
  			if (start) 
  			{

  				/*var move = setInterval(function(){ window.scrollBy(1,0);}, 700);*/
  				if (start) {setInterval(function(){t+=i;document.getElementById("time").innerHTML = (t-(t%6000))/6000+":"+((t%6000)-(t%100))/100 +":"+t%100;}, 1000);}
  				toup(20,40,0,30,100,10,"#a");
  				todown(10,0,1,10,80,10,"#b");
  				todown(40,80,2,50,5,40,"#c");
  				toleft(80,92,60,3,5,40,"#d");

				
  			}
  			if (up){
  				var cc = document.querySelector("#charac");
  				if (stax===1) {y = y - 40;stax+=1;}
  				if (stax===3) {y = y - 50;stax+=1;}
  				if (stax>=4) {y = y;}
  				
  				
  			}
  			if (right){
    			x = x + 1;
    			var mr = document.querySelector("#charac").setAttribute("class", "right");
    			window.scrollBy(10,0);
    			
  			}
  			if (down){
  				if (y>=61) {y-=1;}
    			y = y + 1;
    			
  			}
  			if (left){
    			x = x - 1;
    			window.scrollBy(-10,0);
    			
  			}
  
  			div.style.top = y+'%';
  			div.style.left = x+'%';
  			if (x>=160) {i=0;}
  			window.requestAnimationFrame(gameLoop)
		}

		function gavity(){
			var too = document.querySelector('#charac');
			if (y<grow) {
				y = y + 1;
				too.style.top = y+'%';
			}window.requestAnimationFrame(gavity)
			}

			/*เช็คว่าคนชนวัตถุรึเปล่า*/
		function check(tb,lb,hb,wb)
		{
			if (x>=(lb-w)-0.3&&y>=(tb-(h-2))&&y<=(tb+(hb-0.1))&&x<=(lb-w)) 
			{
				right = false;
				
			}

			if (y===tb-(h-1)&&x>=lb-(w-1)&&x<=lb+(wb-1)) 
			{
				y-=1;
				/*grow = tb-(h-0.1);*/

			}

			if (x>=(lb+wb)&&y>=(tb-(h-1))&&y<=(tb+(hb-0.1))&&x<=(lb+wb))
			{
				left = false;
			}
			if (y>=tb&&y<=tb+hb+0.3&&x>=lb-(w-0.1)&&x<=lb+(wb-0.1)) 
			{
				up = false;
			}

		}
		function toup(xm,pb,tb,lb,hb,wb,id)
		{
			boxa = false;
			if (x>=xm) {boxa=true;}
  			if (boxa) {
  				check(tbs[tb],lb,hb,wb);
  				var a = document.querySelector(id);
 				var cha = document.querySelector("#charac");	

 				if (true&&tbs[tb]>pb){
 					tbs[tb] -= 1;
  					a.style.top = tbs[tb]+"%";  						
  					check(tbs[tb],lb,hb,wb);
  					if (true&&y>=tbs[tb]-h&&x>=lb-(w-1)&&x<=lb+(wb-1)) {
  						y = y -2;
  						cha.style.top = y+"%";
  					}
  				}
  			}
		}

		function todown(xm,pb,tb,lb,hb,wb,id)
		{
			boxb = false;
			if (x>=xm) {boxb=true;}
			if (boxb) {
  				check(tbs[tb],lb,hb,wb);
  				var b = document.querySelector(id);
  				var cha = document.querySelector("#charac");
  				if ( true&&tbs[tb]<pb) 
  				{
  					
  					tbs[tb] = tbs[tb]+1;
  					b.style.top = tbs[tb]+"%";
  					if (true&&y===tbs[tb]+hb&&x>=lb-(w-1)&&x<=lb+(wb-1)) {
  						y += 2;
  						cha.style.top = y+"%";
  					}
  					check(tbs[tb],lb,hb,wb);
  				}
  			}
		}
		function toleft(xm,pb,tb,lb,hb,wb,id)
		{
			boxc = false;
			if (x>=xm) {boxc=true;}
			if (boxc) {
				check(tb,lbs[lb],hb,wb);
  				var c = document.querySelector(id);
  				var cha = document.querySelector("#charac");
  				if ( true&&lbs[lb]>pb) 
  				{
  					lbs[lb] = lbs[lb]-1;
  					c.style.left = lbs[lb]+"%";
  					if (true&&x===lbs[lb]-w&&y>=tb-(h-1)&&y<=tb+(h-1)&&x>=lbs[lb]-w) {
  						x -= 2;
  						cha.style.left = x+"%";
  					}
  					check(tb,lbs[lb],hb,wb);
  				}
			}
		}
		/*function toleft()*/
		function torigth(xm,pb,tb,lb,hb,wb,id)
		{
			boxd = false;
			if (x>=xm) {boxd=true;}
			if (boxd) {
				check(tb,lbs[lb],hb,wb);
  				var c = document.querySelector(id);
  				var cha = document.querySelector("#charac");
  				if ( true&&lbs[lb]<pb) 
  				{
  					lbs[lb] = lbs[lb]+1;
  					c.style.left = lbs[lb]+"%";
  					if (true&&x===lbs[lb]+wb&&y>=tb-(h-1)&&y<=tb+(h-1)&&x>=lbs[lb]+wb) {
  						x += 2;
  						cha.style.left = x+"%";
  					}
  					check(tb,lbs[lb],hb,wb);
  				}
			}
		}
		window.requestAnimationFrame(gameLoop)
</script>

</body>
</html>